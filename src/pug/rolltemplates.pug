mixin condition(options=[], reverse=false)
    -
        const prefix = reverse ? '#^' : '#';
        const suffix = reverse ? '/^' : '/';
        const condition = `${options[0]}()`;
        const parameters = [...options].pop(0);
        const openingBlock = `${prefix}${[condition, ...parameters].join(' ')}`;
        const closingBlock = `${suffix}${[condition, ...parameters].join(' ')}`;
    
    | {{#${openingBlock}}}
    block
    | {{#${closingBlock}}}

rolltemplate.sheet-rolltemplate-ability
    .sheet-template-container
        .sheet-template-header
            h1.sheet-template-name {{charname}}
            h2.sheet-template-title {{title}}
        .sheet-template-rolls
            | {{#rollTotal() computed::blind 1}}
            span.sheet-blind
            | {{/rollTotal() computed::blind 1}}
            span.sheet-template-roll
                | {{computed::successes}}&nbsp;
                span Successes
                span &nbsp;vs Difficulty
                | &nbsp;{{difficulty}}
            br
            | {{#^rollLess() computed::successes difficulty}}
            | {{#rollTotal() computed::extra_successes 0 }}
            h5.sheet-good.sheet-template-roll SUCCESS
            | {{/rollTotal() computed::extra_successes 0 }}
            h5.sheet-good.sheet-template-roll SUCCESS {{#extra_successes}}+{{computed::extra_successes}}{{/extra_successes}}
            | {{/^rollLess() computed::successes difficulty}}
            | {{#rollLess() computed::successes difficulty}}
            h5.sheet-bad FAILURE
            | {{#rollLess() computed::setback 3}}
            | {{#^rollLess() computed::successes difficulty}}
            h5.sheet-purple MINOR SETBACK
            | {{/^rollLess() computed::successes difficulty}}
            | {{#rollLess() computed::successes difficulty}}
            h5.sheet-purple MAJOR SETBACK
            | {{/rollLess() computed::successes difficulty}}
            | {{/rollLess() computed::setback 3}}
            | {{/rollLess() computed::successes difficulty}}

rolltemplate.sheet-rolltemplate-doom
    .sheet-template-container
        .sheet-template-header
            h1.sheet-template-name {{charname}}
            h2.sheet-template-title {{title}}
        .sheet-template-rolls
            span.sheet-blind {{computed::blind}}
            span.sheet-template-roll
                | {{computed::successes}}&nbsp;
                span Successes
                span &nbsp;vs Difficulty
                | &nbsp;{{difficulty}}
            br
            | {{#^rollLess() computed::successes difficulty}}
            h5.sheet-good.sheet-template-roll SUCCESS
            | {{/^rollLess() computed::successes difficulty}}
            | {{#rollLess() computed::successes difficulty}}
            h5.sheet-bad FAILURE
            | {{/rollLess() computed::successes difficulty}}

rolltemplate.sheet-rolltemplate-damage
    .sheet-template-container
        .sheet-template-header
            h1.sheet-template-name {{charname}}
            h2.sheet-template-title {{title}}
        .sheet-template-rolls
            span.sheet-blind {{computed::blind}}
            span.sheet-template-roll {{dice}}
            br
            h5.sheet-template-roll.sheet-amber {{computed::damage}} DAMAGE
